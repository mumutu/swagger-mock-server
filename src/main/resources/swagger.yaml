swagger: '2.0'
info:
  title: meiningjia API
  description: meiningjia API
  version: 1.1.0
host: 139.169.107.7:8080
schemes:
  - http
# security:
#   - defaultAccess: []
basePath: /v2
tags:
  - name: order
    description: 用户认证相关
  - name: User
    description: 用户账号相关
  - name: Customer
    description: 顾客相关
  - name: Order
    description: 订单相关
  - name: Beautician
    description: 美容师相关
  - name: Item
    description: 服务项目相关
  - name: Shop
    description: 门店相关
  - name: Global
    description: 一些初始化的信息
  - name: Shopkeeper
    description: 店长信息
  - name: Location
    description: 地理信息
  - name: Image
    description: 图片相关
  - name: Appointment
    description: 预约相关
produces:
  - application/json
paths:
  /security/verify/captcha:
    post:
      summary: 验证码认证
      description: |
        用户使用验证码来认证，需要提供CAPTCHA信息
        通过IP来保持session
      operationId: getTokenByCaptcha
      parameters:
        - name: data
          in: body
          description: 用户登录对象
          required: true
          schema:
            $ref: '#/definitions/User'
      responses:
        '200':
          description: 获取Token
          schema:
            $ref: '#/definitions/Token'
        '401':
          description: 认证失败
      tags:
        - Security
  /security/verify/user:
    post:
      summary: 用户认证
      description: |
        用户通过用户信息来认证，需要用户提供用户名和密码
        ，初步考虑采用JWT来获取token.
      operationId: getTokenByUser
      parameters:
        - name: data
          in: body
          description: 用户登录对象
          required: true
          schema:
            $ref: '#/definitions/User'
      responses:
        '200':
          description: 获取Token
          schema:
            $ref: '#/definitions/Token'
        '403':
          description: 认证失败
      tags:
        - Security
  /user/reset-password:
    post:
      summary: 重设用户密码
      description: 重设用户密码
      operationId: resetPwd
      parameters: 
        - name: data
          in: body
          description: 用户对象
          required: true
          schema:
            $ref: '#/definitions/User'
      responses:
        '200':
          description: 通用的回复格式
          schema:
            $ref: '#/definitions/Response'
      tags:
        - User
      security:
        - defaultAccess: []
  /security/phone:
    get:
      summary: 手机获取验证码
      description: |
        用户通过手机号码获取验证码
        ，可以使用一些需要验证码的操作
        ，如修改用户密码
        ，需要获取用户手机ip作为一次请求的sessionId
      operationId: getCaptchaByPhone
      parameters:
        - name: phone
          in: query
          description: 用户手机号码
          required: true
          type: string
      responses:
        '200':
          description: 通用的回复格式
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Security
  /user/update-password:
    post:
      summary: 修改用户密码
      description: 修改用户密码
      operationId: updatePwd
      parameters:
        - name: data
          in: body
          description: 用户对象
          required: true
          schema:
            $ref: '#/definitions/User'
      responses:
        '200':
          description: 通用的回复格式
          schema:
            $ref: '#/definitions/Response'
      tags:
        - User
      security:
        - defaultAccess: []
  /security/reg-user:
    post:
      summary: 注册用户
      description: |
        通过手机号码、验证码和密码注册用户
      operationId: registerUser
      parameters:
        - name: data
          in: body
          description: 用户对象
          required: true
          schema:
            $ref: '#/definitions/User'
      responses:
        '200':
          description: 通用的回复格式
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Security
  /beautician/{bid}/details:
    get:
      summary: get beautician details
      description: get beautician details
      operationId: getBeauticianDetails
      parameters:
        - name: bid
          in: path
          type: integer
          format: int32
          required: true
          description: beautician id
      responses:
        '200':
          description: Beautician Details
          schema:
            $ref: '#/definitions/BeauticianDetails'
      tags:
        - Beautician
  /shop/{id}/customers:
    get:
      summary: 获取用户列表
      description: 获取门店内用户的所有信息
      operationId: getCustomersByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0 
      responses:
        '200':
          description: 门店内的用户
          schema:
            type: array
            items:
              $ref: '#/definitions/CustomerItem'
      tags:
        - Shop
      security:
        - defaultAccess: []
    post:
      summary: 添加用户
      description: 门店端添加顾客
      operationId: addCustomerInShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: data
          in: body
          required: true
          description: 添加的顾客资料携带卡帐
          schema:
            $ref: '#/definitions/CustomerDetails'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/customer/all:
    get:
      summary: get all the customers
      description: all the customers
      operationId: getAllCustomersByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 查询的门店id'
        - name: timestamp
          in: query
          type: integer
          format: int64
          description: lastmodified timestamp used to get the newest changed customers(never removed)
          required: false
      responses:
        '200':
          description: 门店内的用户
          schema:
            type: array
            items:
              $ref: '#/definitions/CustomerItem'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/customer/lastmodified:
    get:
      summary: last modified customer
      description: lst modified customer
      operationId: getLastModifiedOfCustomer
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要创建门店的用户id号
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/lastmodified:
    get:
      summary: last modified beautician
      description: last modified beautician
      operationId: getLastModifiedOfBeautician
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要创建门店的用户id号
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/bonus:
    get:
      summary: 获取门店红包类型列表以及状态
      description: 获取门店的红包列表以及状态
      operationId: getBonusInShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 查询的门店id
      responses:
        '200':
          description: bonus对象
          schema:
            $ref: '#/definitions/ShopBonus'
      tags:
        - Shop
      security:
        - defaultAccess: []
    post:
      summary: 设置门店红包类型列表
      description: 添加门店红包类型 暂时没用
      operationId: addBonusTypeInShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 查询的门店id
        - name: data
          in: body
          schema:
            $ref: '#/definitions/Bonus'
      responses:
        '200':
          description: 通用的回复格式 在result中获取结果
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/bonus/{bonus-id}:
    put:
      summary: 对某个bonus进行修改
      description: 获取门店的红包状态 默认为0
      operationId: modifyBonusBySeqId
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 查询的门店id
        - name: bonus-id
          in: path
          type: integer
          format: int32
          required: true
          description: 查询的bonus Id
        - name: data
          in: body
          schema:
            $ref: '#/definitions/Bonus'
      responses:
        '200':
          description: 通用的回复格式 在result中获取结果
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/item/{sid}/bonus-on:
    put:
      summary: 设置红包开启
      description: 设置服务项目开启红包
      operationId: enableBonusInShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 查询的门店id
        - name: sid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的服务实例id
      responses:
        '200':
          description: 通用的回复格式
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/item/{sid}/bonus-off:
    put:
      summary: 设置红包关闭
      description: 设置服务项目开启红包
      operationId: disableBonusInShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: sid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的服务实例id
      responses:
        '200':
          description: 通用的回复格式
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/customer/{uid}/card/consume:
    put:
      summary: 消费卡帐
      description: 对卡帐进行消费，会生成消费记录
      operationId: consumeCardByUid
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: uid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的用户id
        - name: data
          in: body
          required: true
          description: 修改卡的请求
          schema:
            $ref: '#/definitions/CardConsumer'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/customer/{uid}/cards:
    get:
      summary: 获取用户该门店内的卡帐信息
      description: 同用户获取卡帐那套
      operationId: getCardsByUid
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: uid
          in: path
          type: string
          required: true
          description: 想要查询的用户id
      responses:
        '200':
          description: 返回用户的卡帐列表信息
          schema:
            type: array
            items:
              $ref: '#/definitions/Card'
      tags:
        - Shop
      security:
        - defaultAccess: []
    put:
      summary: 修改卡帐
      description: 对卡帐进行修改不生成消费记录
      operationId: modifyCardByUid
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: uid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的用户id
        - name: data
          in: body
          schema:
            $ref: '#/definitions/Card'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
    post:
      summary: 添加卡帐
      description: 为顾客添加卡帐
      operationId: addCardByUid
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: uid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的用户id
        - name: data
          in: body
          schema:
            type: array
            items:
              $ref: '#/definitions/Card'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/customer/{uid}/card/{cid}:
    delete:
      summary: delete card
      description: delete card record it
      operationId: deleteCardById
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: uid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的用户id
        - name: cid
          in: path
          type: integer
          format: int32
          required: true
          description: card id
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/customer/{cid}:
    get:
      summary: customer details
      description: customer details
      operationId: getShopCustomerDetails
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: cid
          in: path
          type: integer
          format: int32
          required: true
          description: customer id /contact's id
        - name: in_shop
          in: query
          type: boolean
          required: false
          description: is in shop default not
      responses:
        '200':
          description: customer info in beautician
          schema:
            $ref: '#/definitions/CustomerDetails'
      tags:
        - Shop
      security:
        - defaultAccess: []
    put:
      summary: update customer details
      description: update cusotmer details exclude card
      operationId: updateCustomerDetails
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: cid
          in: path
          type: integer
          format: int32
          required: true
          description: customer id
        - name: data
          in: body
          required: true
          schema: 
            $ref: '#/definitions/CustomerDetails'
      responses:
        '200':
          description: customer info in beautician
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/card/history:
    get:
      summary: 获取卡帐消费记录
      description: |
        查看用户卡帐的消费记录
      operationId: getCardsHistoryByUid
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: key
          in: query
          required: false
          description: search key in customer name
          type: string
        - name: date
          in: query
          required: false
          description: date
          type: string
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0 
      responses:
        '200':
          description: 卡帐消费记录
          schema:
            type: array
            items:
              $ref: '#/definitions/CardHistory'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/agg-list:
    get:
      summary: 美容师简单列表
      description: |
        美容师列表带
          * 今日预约
          * 全部预约
          * 订单总数
          * 职位信息
      operationId: getBeauticianAggListByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: today_only
          in: query
          type: boolean
          required: false
          description: 是否只计算今天的预约 默认就是true
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0 
      responses:
        '200':
          description: 美容师列表
          schema:
            type: array
            items:
              $ref: '#/definitions/BeauticianSimpleItem'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}:
    get:
      summary: 获取门店信息
      description: |
        门店的基础信息和服务统计信息
        ，不包含金额信息,主要用在客户端查询
      operationId: getShopDetails
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
      responses:
        '200':
          description: 返回一个门店信息
          schema:
            $ref: '#/definitions/ShopDetails'
      tags:
        - Shop
      security:
        - defaultAccess: []
    put:
      summary: 门店信息修改
      description: 修改门店信息，添加图片等
      operationId: modifyById
      parameters:
        - name: data
          in: body
          description: 门店实体的子集 根据需要的进行修改
          required: true
          schema:
            $ref: '#/definitions/ShopDetails'
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
      responses:
        '200':
          description: 通常的返回 
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/brief:
    put:
      summary: brief modify
      description: modify shop info
      operationId: updateShopBrief
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: shop id
        - name: data
          in: body
          required: true
          schema:
            $ref: '#/definitions/ShopBrief'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
    get:
      summary: brief info
      description: shop simple info
      operationId: getShopBrief
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: shop id
      responses:
        '200':
          description: shop brief info
          schema:
            $ref: '#/definitions/ShopBrief'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/all:
    get:
      summary: 获取门店的所有美容师列表 
      description: 获取门店内的美容师列表
      operationId: getAllBeauticiansByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: timestamp
          in: query
          type: integer
          format: int64
          description: lastmodified timestamp used to get the newest changed customers(never removed)
          required: false
      responses:
        '200':
          description: 美容师列表
          schema:
            type: array
            items:
              $ref: '#/definitions/BeauticianSimpleItem'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/dismiss:
    post:
      summary: request for dismissing beautician
      description: request for dismissing beautician
      operationId: dismissBeauticianInShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: shop id
        - name: data
          in: body
          description: dismiss request
          required: true
          schema:
            $ref: '#/definitions/DismissRequest'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/appointment/offline/{oid}:
    get:
      summary: get offline appointment
      description: get the offline appoitment
      operationId: getOfflineAppointmentDetails
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: oid
          in: path
          type: string
          required: true
          description: oid to get
      responses:
        '200':
          description: 门店内预约详情
          schema:
            $ref: '#/definitions/OrderInShop'
      tags:
        - Shop
      security:
        - defaultAccess: []
    delete:
      summary: delete offline appointment
      description: shopkeeper can delete offline appointment
      operationId: cancelOfflineAppointment
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: oid
          in: path
          type: string
          required: true
          description: oid to delete
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/appointment/{oid}:
    get:
      summary: appointment details
      description: appointment details
      operationId: getShopAppointmentDetails
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: oid
          in: path
          type: string
          required: true
          description: 想要查询的门店预约详情
      responses:
        '200':
          description: 门店内预约详情
          schema:
            $ref: '#/definitions/OrderInShop'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/{bid}/appointments:
    get:
      summary: 获取美容师该门店内的预约记录
      description: 获取美容师该门店内的预约记录
      operationId: getAppointmentsByBeauticianid
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: bid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的美容师id
        - name: start_date
          in: query
          type: string
          required: false
          description: 查询的初始时间的data-str可以传递月份或者日
        - name: end_date
          in: query
          type: string
          required: false
          description: 查询的初始时间的data-str include? always the last day with 12:00 am
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的页数 从0开始
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: 返回美容师的预约列表
          schema:
            type: array
            items:
              $ref: '#/definitions/AppointmentItem'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/{bid}/metrics/appointment:
    get:
      summary: get beautician appointment list metric
      description: using in beautician all appointment
      operationId: getBeauticianAppMetric
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: bid
          in: path
          type: integer
          format: int32
          required: true
          description: beautician id
        - name: start_date
          in: query
          type: string
          required: false
          description: 查询的初始时间的data-str可以传递月份或者日
        - name: end_date
          in: query
          type: string
          required: false
          description: 查询的初始时间的data-str include? always the last day with 12:00 am
        # - name: year
        #   in: query
        #   type: integer
        #   format: int32
        #   required: true
        #   description: year to retrieve records
        # - name: month
        #   in: query
        #   type: integer
        #   format: int32
        #   required: true
        #   description: month to retrieve records

      responses:
        '200':
          description: 返回门店的预约聚合数据列表
          schema:
            type: array
            items:
              $ref: '#/definitions/Metric'
        '403':
           description: 认证失败
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/items:
    get:
      summary: 获取门店的服务项目
      description: |
        获取门店的服务项目
        如果用户是顾客则不会显示非标准化项目
      operationId: getItemsByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店id
        - name: status
          in: query
          type: string
          required: false
          description: status of the online item
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: 可用的项目列表
          schema:
            type: array
            items:
              $ref: '#/definitions/ServiceSimpleItem'
      tags:
        - Shop
      security:
        - defaultAccess: []
    post:
      summary: add new item
      description: add new item
      operationId: addItemInShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: data
          in: body
          required: true
          schema:
            $ref: '#/definitions/ItemDetails'
      responses:
        '200':
          description: default general response
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/item/{iid}:
    get:
      summary: get item details
      description: get item details
      operationId: getShopItemDetails
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: iid
          in: path
          type: integer
          format: int32
          required: true
          description: item id
      responses:
        '200':
          description: default general response
          schema:
            $ref: '#/definitions/ItemDetails'
      tags:
        - Shop
      security:
        - defaultAccess: []
    put:
      summary: add new item
      description: add new item
      operationId: modifyItemInShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: iid
          in: path
          type: integer
          format: int32
          required: true
          description: item id
        - name: data
          in: body
          required: true
          description: update data
          schema:
            $ref: '#/definitions/ItemDetails'
      responses:
        '200':
          description: default general response
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/{bid}/order/ongoing:
    get:
      summary: 获取门店某个美容师正在进行中的订单
      description: |
        获取门店中某个美容师的所有进行中的订单
      operationId: getOngoingOrdersByShopAndBeautician
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: bid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的美容师的id号
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: 返回门店的订单列表
          schema:
            type: array
            items:
             $ref: '#/definitions/OrderItem'
        '403':
          description: 认证失败
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/{bid}/order/finished:
    get:
      summary: 获取门店已经完成的的订单
      description: |
        获取自己的所有完成的订单
        有默认条数，已经完成的订单和关闭的订单
      operationId: getFinishedOrdersByShopAndBeautician
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: bid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的美容师的id号
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: 返回门店的订单列表
          schema:
            type: array
            items:
              $ref: '#/definitions/OrderItem'
        '403':
          description: 认证失败
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/orders:
    get:
      summary: 获取门店全部的订单
      description: |
        获取门店的所有订单
      operationId: getAllOrdersByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: 返回门店的订单列表
          schema:
            type: array
            items:
             $ref: '#/definitions/OrderItem'
        '403':
          description: 认证失败
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/order/ongoing:
    get:
      summary: 获取门店正在进行中的订单
      description: |
        获取门店的所有进行中的订单
        有默认条数，用来显示在进行中的订单
        * 非关闭订单
        * 非完成订单
      operationId: getOngoingOrdersByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: 返回门店的订单列表
          schema:
            type: array
            items:
             $ref: '#/definitions/OrderItem'
        '403':
          description: 认证失败
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/order/finished:
    get:
      summary: 获取门店已经完成的的订单
      description: |
        获取自己的所有完成的订单
        有默认条数，已经完成的订单和关闭的订单
      operationId: getFinishedOrdersByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: 返回门店的订单列表
          schema:
            type: array
            items:
              $ref: '#/definitions/OrderItem'
        '403':
          description: 认证失败
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/metrics/appointment:
    get:
      summary: 聚合信息预约
      description: |
        获取门店的预约聚合信息, 返回Tuple2[day, num] 暂用Tag来 day是一个String
      operationId: getAppointmentMetricsByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: start_date
          in: query
          type: string
          required: false
          description: 查询的初始时间的data-str可以传递月份或者日
        - name: end_date
          in: query
          type: string
          required: false
          description: 查询的初始时间的data-str include? always the last day with 12:00 am
      responses:
        '200':
          description: 返回门店的预约聚合数据列表
          schema:
            type: array
            items:
              $ref: '#/definitions/Metric'
        '403':
           description: 认证失败
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/{bid}/schedule:
    get:
      summary: 获取美容师的排班
      description: |
        获取美容师的排版记录
      operationId: getSchedulerByIdAndShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询门店id号
        - name: bid
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询美容师id
        - name: date
          in: query
          type: string
          required: false
          description: 查询的天
      responses:
        '200':
          description: 排班列表
          schema:
            type: array
            items:
              $ref: '#/definitions/ScheduleItem'
      tags:
        - Shop
      security:
        - defaultAccess: []
    put:
      summary: 添加美容师的排班
      description: |
        修改美容师的排班
      operationId: modifySchedulerById
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: shop id
        - name: bid
          in: path
          type: integer
          format: int32
          required: true
          description: beautician id
        - name: data
          in: body
          required: true
          schema:
            type: array
            items:
              $ref: '#/definitions/ScheduleItem'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/metrics:
    get:
      summary: 获取门店聚合信息
      description: |
        获取门店聚合信息包括
        * 月增长
        * 本月订单
        * 本月业绩
        * 今日预约
        * 已上线项目
        * 上线美容师
      operationId: getShopMetrics
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: day_date
          in: query
          type: string
          required: false
          description: 想要查询的天的dateStr yyyy-MM-dd
      responses:
        '200':
          description: 返回门店的聚合总览
          schema:
            $ref: '#/definitions/ShopMetrics'
        '403':
           description: 认证失败
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/appointments:
    get:
      summary: 获取门店的某一时间段的预约信息
      description: 获取门店的预约信息
      operationId: getAppointmentsByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询的门店的id号
        - name: start_date
          in: query
          type: string
          required: false
          description: 查询的初始时间的data-str可以传递月份或者日
        - name: end_date
          in: query
          type: string
          required: false
          description: 查询的结束时间的data-str include? always the last day with 12:00 am
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: 返回门店的预约列表
          schema:
            type: array
            items:
              $ref: '#/definitions/AppointmentItem'
        '403':
           description: 认证失败
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/set/shopmanager:
    put:
      summary: set the beautician to shopmanager
      description: set/unset beautician as a role of shopManager
      operationId: setBeauticianShopManager
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: the shopid
        - name: data
          in: body
          required: true
          schema:
            $ref: '#/definitions/Switcher'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/beautician/set/online:
    put:
      summary: set the beautician to online
      description: set beautician online/offline
      operationId: setBeauticianOnline
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: the shopid
        - name: data
          in: body
          required: true
          schema:
            $ref: '#/definitions/Switcher'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/finance/overview:
    get:
      summary: overview
      description: overview
      operationId: getFinanceOverviewByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: shopid
      responses:
        '200':
          description: finance overview
          schema:
            $ref: '#/definitions/FinanceOverview'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/finance/details:
    get:
      summary: the history of shop finance
      description: show hitory of shop finance
      operationId: getIncomingDetailsByShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: shop id
        - name: key
          in: query
          required: false
          description: search key in customer name
          type: string
        - name: date
          in: query
          required: false
          description: date
          type: string 
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: Incoming item
          schema:
            type: array
            items:
              $ref: '#/definitions/OrderItem'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /shop/{id}/order/offline/create:
    post:
      summary: record an offline order
      description: shopkeeper record an offline order
      operationId: recordOfflineOrder
      parameters:
        - name: id
          in: path
          description: shop id
          required: true
          type: integer
          format: int32
        - name: data
          in: body
          description: offline order request
          required: true
          schema:
            $ref: '#/definitions/OfflineOrderRequest'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
        '403':
          description: token error
      tags:
        - Shop
      security:
        - defaultAccess: []
  /finance/withdraw:
    post:
      summary: withdraw available cash
      description: withdraw available cash
      operationId: withdrawCash
      parameters:
        - name: data
          in: body
          description: a withdraw request
          required: true
          schema:
            $ref: '#/definitions/WithdrawRequest'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Finance
      security:
        - defaultAccess: []
  /shopkeeper/{id}/profile:
    get:
      summary: 获取店长的用户信息
      description: 店长来获取用户自己信息 token
      operationId: getShopkeeperProfile
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询用户id号
      responses:
        '200':
          description: user profile
          schema:
            $ref: '#/definitions/Profile'
        '403':
          description: token error
      tags:
        - Shopkeeper
      security:
        - defaultAccess: []
    put:
      summary: 修改用户个人信息
      description: 修改用户信息
      operationId: modifyShopkeeperProfile
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要修改的用户id号
        - name: data
          in: body
          description: 修改个人信息
          required: true
          schema:
            $ref: '#/definitions/Profile'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shopkeeper
      security:
        - defaultAccess: []
  /shopkeeper/{id}/shops:
    get:
      summary: 获取店长门店列表
      description: |
        店长获取自己的门店列表
      operationId: getShopsByShopKeeper
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要查询用户id号
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: 门店列表
          schema:
            type: array
            items:
              $ref: '#/definitions/ShopItem'
      tags:
        - Shopkeeper
      security:
        - defaultAccess: []
    post:
      summary: 创建一个门店
      description: 店长主动录入门店 暂时不做
      operationId: addShop
      parameters:
        - name: id
          in: path
          type: integer
          format: int32
          required: true
          description: 想要创建门店的用户id号
        - name: data
          in: body
          description: 门店的基本信息
          required: true
          schema:
            $ref: '#/definitions/ShopDetails'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shopkeeper
      security:
        - defaultAccess: []
  /invite-beautician:
    post:
      summary: invite beautician
      description: invite beautician
      operationId: inviteBeautician
      parameters:
        - name: data
          in: body
          description: request for invite the beautician
          required: true
          schema:
            $ref: '#/definitions/Invitation'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Shop
      security:
        - defaultAccess: []
  /item/{root}/category:
    get:
      summary: 获取美容项目类别信息
      description: |
        美容 美体 养身 是root值
        获取它们的小类信息
        这里的小类是标签么还是分类
      operationId: getItemCategory
      parameters:
        - name: root
          in: path
          description: 美容 美体 养身
          required: true
          type: integer
          format: int32
        - name: city
          in: query
          description: 城市区域信息
          required: false
          type: integer
          format: int32
      responses:
        '200':
          description: 显示类别信息
          schema:
            type: array
            items:
              $ref: '#/definitions/Category'
      tags:
        - Item
      security:
        - defaultAccess: []
  /item/type:
    get:
      summary: item type
      description: item type
      operationId: getItemTypes
      parameters: []
      responses:
        '200':
          description: 类型列表
          schema:
            type: array
            items:
              $ref: '#/definitions/GeneralItem'
      tags:
        - Item
      security:
        - defaultAccess: []
  /feedback:
    post:
      summary: 反馈消息
      description: 终端使用者反馈消息
      operationId: postFeedback
      parameters:
        - name: data
          in: body
          required: true
          schema:
            $ref: '#/definitions/Feedback'
      responses:
        '200':
          description: 通常的返回
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Global
      security:
        - defaultAccess: []
  /image/upload:
    post:
      summary: 上传图片
      description: |
        上传图片API 返回一个imageId
      operationId: uploadImg
      consumes:
        #- application/x-www-form-urlencoded
        - multipart/form-data
      parameters:
        - name: file
          in: formData
          type: file
          description: 上传的图片
          required: true
      responses:
        '200':
          description: |
            通常的返回 
            返回result是一个imageId
          schema:
            $ref: '#/definitions/Response'
      tags:
        - Image
      security:
        - defaultAccess: []
  /image/u/{uid}:
    get:
      summary: 获取图片
      description: 通过用户id和图片参数获取图片
      operationId: getImageByUid
      parameters:
        - name: uid
          in: path
          description: UID
          required: true
          type: integer
          format: int32
        - name: type
          in: query
          description: |
            显示图片的类型
            head|thumbnail|raw
            * head => 60 * 60
            * thumbnail => 50%?
            * raw => 原始图像
            默认是raw
          required: false
          type: string
      responses:
        '200':
          description: 图片流
          schema:
            type: file
      tags:
        - Image
      security:
        - defaultAccess: []
  /image/{id}:
    get:
      summary: 获取图片
      description: 通过图片id和图片参数获取图片
      operationId: getImage
      parameters:
        - name: id
          in: path
          description: 图片Id
          required: true
          type: integer
          format: int32
        - name: type
          in: query
          description: |
            显示图片的类型
            head|thumbnail|raw
            * head => 60 * 60
            * thumbnail => 50%?
            * raw => 原始图像
            默认是raw
          required: false
          type: string
      responses:
        '200':
          description: 图片流
          schema:
            type: file
      tags:
        - Image
      security:
        - defaultAccess: []
  /city/online:
    get:
      summary: 获取上线城市列表
      description: 获取上线城市列表
      operationId: getOnlineCity
      responses:
          '200':
            description: 城市列表
            schema:
              type: array
              items:
                $ref: '#/definitions/GeneralItem'
      tags:
        - City
      security:
        - defaultAccess: []
  /banks:
    get:
      summary: bank type list
      description: list all bank type
      operationId: getBankTypes
      parameters: []
      responses:
        '200':
          description: bank type list
          schema:
            type: array
            items:
              $ref: '#/definitions/GeneralItem'
      tags:
        - Bank
      security:
        - defaultAccess: []
  /bank/{type}:
    get:
      summary: bank  entity
      description: open account bank
      operationId: getBanksByType
      parameters:
        - name: type
          in: path
          required: true
          description: bank type
          type: string
        - name: city
          in: query
          required: false
          description: city filter
          type: integer
        - name: size
          in: query
          description: 显示的记录条数
          required: false
          type: integer
          format: int32
          default: 10
        - name: page
          in: query
          description: 记录的page
          required: false
          type: integer
          format: int32
          default: 0
      responses:
        '200':
          description: real bank
          schema:
            type: array
            x-yod-name: bank
            items:
              $ref: '#/definitions/GeneralItem'
      tags:
        - Bank
      security:
        - defaultAccess: []
securityDefinitions:
  defaultAccess:
    type: apiKey 
    name: X-Auth-Token
    in: header
#TODO add entity definitions:
definitions:
  Response:
    description: general Response object
    type: object
    properties:
      code:
        description: return code
        type: integer
        format: int32
      message:
        description: return message
        type: string
      result:
        description: |
          Result may be related with business
        type: string
  User:
    type: object
    properties:
      username:
        description: user name
        type: string
      password:
        description: user password
        type: string
        format: password
      old_password:
        description: user old password
        type: string
        format: password
      phone:
        description: 手机号
        type: string
      captcha:
        description: 验证码
        type: string
      invitation_code:
        description: 邀请码
        type: string
      type:
        description: 登录的类型
        type: string
  BeauticianProfile:
    type: object
    properties:
      profile:
        type: object
        $ref: '#/definitions/Profile'
      work_start_time:
        description: HH:MM string used in beautician
        type: string 
      work_end_time:
        description: HH:MM string used in beautician
        type: string
      shop_name:
        description: beautician current name
        type: string
  Profile:
    type: object
    properties:
      chat_id:
        type: string
        description: chat_id for easemobe
      head:
        type: string
        description: head imageId
      name:
        type: string
        description: user name
      phone:
        type: string
        format: phone
      gender:
        description: user gender
        type: integer
        enum:
          - FEMALE
          - MALE
      location:
        description: user location
        type: string
      signature:
        description: user signature may be empty
        type: string
      invitation_code:
        description: used in invitation
        type: string
    required:
      - name
      - phone
  Token:
    description: |
      API交互的Token
      Token => User
    type: object
    properties:
      token:
        type: string
      id:
        type: integer
        format: int32
      uid:
        type: integer
        format: int32
      expire:
        type: integer
        format: int32
    required:
      - token
      - expire
  Card:
    description: user card
    type: object
    properties:
      id:
        type: integer
        description: card id
      name:
        type: string
        description: card name
      str_name:
        type: string
        description: name of the shop
      type:
        type: string
        description: |
          Card type
          * amount
          * count
      left:
        type: integer
        description: card left point
      totle:
        type: integer
        description: card totle point
    required:
      - id
  AppointmentItem:
    description: Appointment Item used in list
    type: object
    properties:
      id:
        type: string
        description: Appointment id
      app_type:
        type: string
        description: offline/online
      item_name:
        type: string
        description: Service Item Name
      beautician_name:
        type: string
        description: Beautician Name
      customer_name:
        type: string
        description: customer Name
      date:
        type: string
        description: Appointment Date
      time:
        type: string 
        description: Apponintment Time
  Appointment:
    description: Appointment details
    type: object
    properties:
      id:
        type: string
        description: Appointment id
      item_name:
        type: string
        description: Service Item Name
      beautician_name:
        type: string
        description: Beautician Name
      customer_name:
        type: string
        description: Customer Name
      customer_phone:
        type: string
        format: phone
        description: the phone of customer
      amount:
        type: string
        description: ammout of the order 
      date:
        type: string
        description: date-time yyyy-MM-dd
      hour:
        type: integer
        format: int32
        description: hours
      order_date:
        type: string
        description: date-time yyyy-MM-dd hh:mm:ss
      shop_location:
        type: object
        $ref: '#/definitions/Location'
      shop_phone:
        type: string
        format: phone
        description: the phone of shop associated with this appointment
      payment:
        type: integer
        format: int32
        description: method of payment
        enum:
          - WECHAT
          - ALIPAY
          - OFFLINE
      state:
        type: string
        description: 支付状态
    required:
      - id
  OrderItem:
    description: |
      Order Item for Order list 
    type: object
    properties:
      id:
        type: string
        description: Order id
      img_id:
        type: string
        description: Image id for head
      name:
        type: string
        description: Order
      timestamp:
        type: integer
        format: int64
        description: timestamp
      amount:
        type: number
        format: float
        description: cost of the Order
      state:
        description: |
          TODO: should be an integer
          * code => String
          - inAppointment
          - payed
          - waitingForPay
          - closed
          - completed
        type: string
      type:
        description: offline/online type
        type: string
    required:
      - id
  BeauticianSimpleItem:
    description: Beautician Simple Item
    type: object
    properties:
      id:
        type: integer
        description: Beautician id
      img_id:
        type: string
        description: Image id for head image
      chat_id:
        type: string
        description: chat_id for easemobe
      name:
        type: string
        description: Beautician name
      ordersCount:
        type: integer
        format: int32
        description: accumulated orders
      appCount:
        type: integer
        format: int32
        description: accumulated appointments today/all
      position:
        type: string
        description: position display beautician/shop mananger
      is_online:
        type: boolean
        description: is online
  BeauticianItem:
    description: Beautician Item used in list
    type: object
    properties:
      id:
        type: integer
        description: Beautician id
      img_id:
        type: string
        description: Image id for head image
      chat_id:
        type: string
        description: chat_id for easemobe
      name:
        type: string
        description: Beautician name
      scores:
        type: number
        format: float
        description: scores
      tags:
        description: top 3 tags of the Beautician
        type: array
        items:
          type: string
      distance:
        description: distance from the location in query 
        type: integer
        format: int32
      service_count:
        description: counter of the Service
        type: integer
        format: int32
      customer_count:
        description: counter of customers
        type: integer
        format: int32
    required:
      - id
      - name
  ServiceSetItem:
    description: |
      Service Item Set
    type: object
    properties:
      id:
        type: integer
        description: Service id
      name:
        type: string
        description: display name
      description:
        type: string
        description: description for Service-Item
      sale_cost:
        type: number
        format: float
        description: current cost
      cost:
        type: number
        format: float
        description: former cost
      duration:
        type: string
        description: display of the duration
      img_id:
        type: string
        description: imageId for display
  ServiceItemItem:
    description: Service-Item item
    type: object
    properties:
      id:
        type: integer
        description: Service id
      name:
        type: string
        description: display name
      description:
        type: string
        description: description for Service-Item
      sale_cost:
        type: number
        format: float
        description: current cost
      cost:
        type: number
        format: float
        description: former cost
      duration:
        type: string
        description: display of the duration
      img_id:
        type: string
        description: imageId for display
      evaluation:
        type: number
        format: float
        description: |
          Evaluation of the Service-Item
      shop_id:
        type: integer
        format: int32
        description: the shop id associated with the service
      shop_name:
        type: string
        description: the shop name associated with the service
      distance:
        description: distance from the location in query 
        type: integer
        format: int32
  ServiceItem:
    description: |
      Service-Item item used in list 
      both for 
      * Service-Item set
      * Service-Item
    type: object
    properties:
      id:
        type: integer
        description: Service id
      name:
        type: string
        description: display name
      description:
        type: string
        description: description for Service-Item
      sale_cost:
        type: number
        format: float
        description: current cost
      cost:
        type: number
        format: float
        description: former cost
      duration:
        type: string
        description: display of the duration
      img_id:
        type: string
        description: imageId for display
      is_set:
        type: boolean
        description: |
          * case true => display as a set click lead to another list
          * case false => display as a Service-Item click lead to the details
      scores:
        type: number
        format: float
        description: |
          Evaluation of the Service-Item
          * case true => -1
          * case false => {the evaluation}
      shop_id:
        type: integer
        format: int32
        description: the shop id associated with the service
      shop_name:
        type: string
        description: the shop name associated with the service
      distance:
        description: distance from the location in query 
        type: integer
        format: int32
      is_valid:
        type: boolean
        description: |
          used in my -> Item
      is_bonus:
        type: boolean
        description: |
          used in shop -> Item which set bonus
      is_refund:
        type: boolean
        description: |
          is refund
      location:
        type: object
        description: location
        $ref: '#/definitions/Location'
    required:
      - id
  Metric:
    description: |
      Metric is key-value contains string string
    type: object
    properties:
      key:
        type: string
        description: metric key
      value:
        type: integer
        format: int32
        description: value
  Tag:
    description: |
      Tag Can used for all Key-Value something like Tuple2[String, Any]
      TODO
    type: object
    properties:
      key:
        type: string
        description: key 
      value:
        type: integer
        description: value
    required:
      - key
      - value
  BeauticianDetails:
    description: beautician details
    type: object
    properties:
      id:
        description: beautician name
        type: integer
        format: int32
      img_id:
        description: beauticianimage id
        type: string
      name:
        description: name
        type: string
      phone:
        description: phone
        type: string
      birthday:
        description: birthday
        type: string
      identity:
        description: identity code
        type: string
      career_age:
        description: year of career
        type: string
      title:
        description: work title
        type: string
      customer_num:
        description: frequent customer
        type: integer
        format: int32
      good_at:
        description: service good at
        type: string
      advantage:
        description: advantage description
        type: string
      experience:
        description: work experience TODO
        type: string
      education:
        description: education experience TODO
        type: string
      online:
        description: online/offline online offline's meaning
        type: boolean
  Comment:
    description: Comment Entity
    type: object
    properties:
      name:
        description: username
        type: string
      timestamp:
        description: timestamp
        type: integer
        format: int64
      anonymous:
        description: is anonymous comment
        type: boolean
      img_id:
        description: user head if anonymous this will empty
        type: string
      comment:
        description: user comment
        type: string
      tags:
        description: tags
        type: array
        items:
          type: string
    required:
      - name
      - timestamp
      - comment
  CommentRequest:
    description: Comment Entity
    type: object
    properties:
      content:
        type: string
        description: comment content
      tags:
        description: tags
        type: array
        items:
          type: integer
    required:
      - content
      # - tags
  ShopkeeperInfo:
    description: shopkeeper info
    type: object
    properties:
      name:
        type: string
        description: shopkeeper name
      identity:
        type: string
        description: shopkeeper idnetity card number
      phone:
        type: string
        description: shopkeeper phone
  ShopManagerInfo:
    description: shopmanger info
    type: object
    properties:
      name:
        type: string
        description: shopmanager name
      phone:
        type: string
        description: shopmanager phone
      qq:
        type: string
        description: shopmanager qq
      wechat:
        type: string
        description: shopmanager wechat number
      email:
        type: string
        description: shopmanager email
  BankInfo:
    description: bank info
    type: object
    properties:
      account:
        type: string
        description: bank account
      type:
        type: string
        description: bank name
      name:
        type: string
        description: the name of bank where register account
  ShopDetails:
    description: Shop details
    type: object
    properties:
      id:
        type: integer
        description: Shop id
      name:
        type: string
        description: display name
      type:
        type: string
        description: shop type 临街店铺
      province:
        type: string
        description: city
      district:
        type: string
        description: district
      address:
        type: string
        description: address
      age:
        type: integer
        format: int32
        description: operate age
      area:
        type: integer
        format: int32
        description: shop area
      beautician_num:
        type: integer
        format: int32
        description: beautician number
      bed_num:
        type: integer
        format: int32
        description: bed number
      member_num:
        type: integer
        format: int32
        description: member number
      description:
        type: string
        description: description for Shop
      phone:
        type: string
        description: phone
      img_ids:
        type: array
        items:
          type: string
        description: array of shop images
      shopkeeper:
        type: object
        $ref: '#/definitions/ShopkeeperInfo'
      shopmanager:
        type: object
        $ref: '#/definitions/ShopManagerInfo'
      bank:
        type: object
        $ref: '#/definitions/BankInfo'
    required:
      - id
  Category:
    description: Category
    type: object
    properties:
      id:
        type: string
        description: id of Category
      name:
        type: string
        description: display name of the Category
    required:
      - id
      - name
  ServiceDetails:
    description:  details of a Service-Item
    type: object
    properties:
      id:
        type: integer
        description: Service-Item id
      img_ids:
        type: array
        items:
          type: string
        description: array of Service-Item images
      name:
        type: string
        description: display name
      summary:
        type: string
        description: display summary unber the name
      tags:
        type: array
        description: service tags
        items:
          type: string
      description:
        type: string
        description: description for Service
      sale_cost:
        type: number
        format: float
        description: current cost
      cost:
        type: number
        format: float
        description: former cost
      duration:
        type: string
        description: display of the duration
      shop_id:
        type: integer
        format: int32
        description: the shop id associated with the service
      shop_name:
        type: string
        description: the shop name associated with the service
      location:
        type: object
        description: location
        $ref: '#/definitions/Location'
      brand:
        type: string
        description: brand of the service maybe empty
      target:
        type: string
        description: display target people
      phone:
        type: string
        format: phone
        description: phone of the shop
      season:
        description: |
          季节
          - spring
          - summer
          - autumn
          - winter
        type: string
      cautions:
        description: cautions
        type: array
        items:
          type: string
      products:
        description: products used in the Service-Item
        type: array
        items:
          $ref: '#/definitions/Product'
      steps:
        description: steps of the Service-Item
        type: array
        items:
          type: string
    required:
      - id
  Product:
    description: products used in Service-Item
    type: object
    properties:
      id:
        type: integer
        description: product id
      name:
        type: string
        description: product name
      img_id:
        type: string
        description: product image
    required:
      - id
      - name
  Payment:
    description: payment
    type: object
    properties:
      pay_info:
        type: string
        description: payment
  PaymentRequest:
    description: payment Request
    type: object
    properties:
      id:
        type: string
        description: 需要操作的订单id
      bid:
        type: integer
        description: 添加的红包id
      cid:
        type: integer
        description: 用户id
      payment:
        type: integer
        format: int32
        enum:
          - WECHAT
          - ALIPAY
          - OFFLINE
        description: 支付方式 如果为空默认则是到店支付
    required:
      - id
  OrderInShop:
    description: Order Entity
    type: object
    properties:
      id:
        type: string
        description: order id 2015xxxxx
      item_name:
        type: string
        description: service item name
      amount:
        type: string
        description: ammout of the order
      remark:
        type: string
        description: remark of the offline 
      timestamp:
        type: integer
        format: int64
        description: the timestamp when order is created
      start_datetime:
        type: string
        description: date-time yyyy-MM-dd hh:mm
      end_datetime:
        type: string
        description: date-time yyyy-MM-dd hh:mm
      beautician_id:
        type: integer
        description: Beautician id associated with this order
      beautician_name:
        type: string
        description: Beautician name associated with this order
      beautician_chatid:
        type: string
        description: beautician chat_id
      beautician_phone:
        type: string
        description: beautician phone
      customer_id:
        type: integer
        description: user  id
      customer_name:
        type: string
        description: user name
      customer_phone:
        type: string
        description: cusomer phone
      customer_chatid:
        type: string
        description: customer chatid
      payment:
        type: integer
        description: payment maybe need
      comment:
        type: object
        $ref: '#/definitions/Comment'
      state:
        description: |
          TODO: should
          * code => String
          - inAppointment
          - payed
          - waitingForPay
          - closed
          - completed
        type: string
  Location:
    description: 位置信息
    type: object
    properties:
      name:
        type: string
        description: location name
      latitude:
        type: number
        format: double
        description: latitude of the location
      longitude: 
        type: number
        format: double
        description: longitude of the location
  ShopItem:
    description: used in Shop item list
    type: object
    properties:
      id:
        type: integer
        description: shop id
      img_id:
        type: integer
        description: img id
      name:
        type: string
        description: name of the shop
      location:
        $ref: '#/definitions/Location'
      phone:
        type: string
        format: phone
        description: phone of the shop
    required:
      - id
      # - name
      # - location
  ShopMetrics:
    description: 门店的聚合数据
    type: object
    properties:
      order_stat:
        type: object
        $ref: '#/definitions/OrderStatistics'
      sum_beautician:
        type: integer
        format: int32
        default: 0
        description: beautician sum
      sum_item:
        type: integer
        format: int32
        default: 0
        description: item sum
  OrderStatistics:
    description: 订单的聚合数据
    type: object
    properties:
      month_orders:
        type: integer
        format: int32
        default: 0
        description: 本月已完成订单
      month_volume:
        type: number
        format: float
        description: 本月已完成的业绩
      num_growth_rate:
        type: integer
        format: int32
        default: 0
        description: 本月较上月的订单数量增长（可能为-）
      amount_growth_rate:
        type: integer
        format: int32
        default: 0
        description: 本月较上月的订单量增长（可能为-）
      day_apps:
        type: integer
        format: int32
        default: 0
        description: 今日剩余的预约单
  Statistics:
    description: 销售额
    type: object
    properties:
      turnover:
        type: integer
        format: int32
        description: Turnover this month
      volumn:
        type: integer
        format: int32
        description: Target volumn this month
      incoming:
        type: integer
        format: int32
        description: Incoming volumn this month
    required:
      - turnover
      - volumn
      - incoming
  Worksummary:
    description: work summary of the order
    type: object
    properties:
      datestr:
        type: string
        description: date String for display
        default: ""
      beautician_id:
        type: integer
        format: int32
        default: 0
        description: beautician id
      beautician_name:
        type: string
        description: beautician name
        default: ""
      beautician_head:
        type: integer
        format: int32
        description: imageId of the beautician
        default: 0
      content:
        type: string
        description: content
        default: ""
      order_id:
        type: string
        description: associated order Id
        default: ""
    required:
      - beautician_id
      - content
      - order_id
  #--修改了    
  AppointmentRequest:
    description: create an appointment
    type: object
    properties:
      sid:
        description: 项目id
        type: integer
        format: int32
      type:
        description: 项目的类型 套餐/单一项目
        type: string
        default: single
      bid:
        description: 美容师id
        type: integer
        format: int32
      date:
        type: string
        description: 哪一天
      time:
        type: integer
        format: int32
        description: 预约的时间 小时为粒度
      minute:
        type: integer
        format: int32
        default: 0
        description: 预约的时间 分钟
      cid:
        type: integer
        format: int32
        description: 用户的cid
      payment:
        type: integer
        format: int32
        enum:
          - WECHAT
          - ALIPAY
          - OFFLINE
        description: 支付方式 如果为空默认则是到店支付
    required:
      - sid
      - bid
      - date
      - time
      - cid
  WorkSummaryRequest:
    description: same as name more?
    type: object
    properties:
      content:
        type: string
        description: content
    required:
      - content
  CustomerItem:
    description: used in customer list
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: customer id
        default: 0
      name:
        type: string
        description: customer name
      chat_id:
        type: string
        description: chat_id for easemobe
      img_id:
        type: integer
        description: customer image id
      phone:
        type: string
        description: cutomer phone
      in_shop:
        type: boolean
        description: is in shop
    required:
      - id
  CardHistory:
    description: card usage history
    type: object
    properties:
      timestamp:
        type: integer
        format: int64
        description: timestamp
      name:
        type: string
        description: name of the card
      shop_name:
        type: string
        description: name of the shop
      type:
        type: string
        description: card type
      amount:
        type: number
        format: float
        description: card cost amount
  CustomerDetails:
    description: user to add
    type: object
    properties:
      name:
        type: string
        description: user name
      img_id:
        type: string
        description: user head
      gender:
        type: string
        description: female/male
      phone:
        type: string
        description: user phone
      birthday:
        type: string
        description: birthday
      hobby:
        type: string
        description: hobby
      characteristic:
        type: string
        description: characteristic of the customer
      remark:
        type: string
        description: remark of the customer
      cards:
        type: array
        items: 
          $ref: '#/definitions/Card'
      belongs:
        type: array
        items:
          $ref: '#/definitions/VisitCard'
  Activity:
    description: advertisements in banner
    type: object
    properties:
      img_id:
        type: string
        description: image 
      url:
        type: string
        description: url string
      name:
        type: string
        description: Activity name
      need_login:
        type: boolean
        description: 是否需要登陆页面
    required:
      - url
  ShopBonus:
    description: bonus list with status
    type: object
    properties:
      is_enable:
        type: boolean
        description: |
          true => list[bonus]
          false => emptyList
      bonus:
        type: array
        items:
          $ref: '#/definitions/Bonus'
  Bonus:
    description: bonus
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: bonus id 
      amount:
        type: number
        format: float
        description: bonus amount
      amount_limit:
        type: number
        format: float
        description: bonus limit
      end_time:
        type: string
        description: end_time
      status:
        type: string
        description: status
  Role:
    description: Role
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: role id
      r_type:
        type: string
        description: role type it's a fix value shop  has a role too
  Feedback:
    description: feedback
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: uid
      content:
        type: string
        description: feed back content
  ScheduleItem:
    description: scheduler item
    type: object
    properties:
      date:
        type: string
        description: date
      time:
        type: string
        description: time hh:MM
      type:
        type: integer
        description: type of this scheduler appointmentday off
  CardConsumer:
    description: card consume
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: card id
      ctype:
        type: string
        description: card type
      amout:
        type: integer
        format: int32
        description: consume ammout
  Switcher:
    description: using in set true or false case
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: object id
      is_on:
        type: boolean
        description: true => set and false => unset
  Invitation:
    description: invitation
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: shopid
      phone:
        type: string
        description: beautician phone
  DismissRequest:
    description: dismiss beautician
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: beautician id
      reason:
        type: string
        description: dismiss reason which can be empty
  ServiceSimpleItem:
    description: simple item used in shop
    type: object
    properties:
      id: 
        type: integer
        format: int32
        description: item instance id
      name:
        type: string
        description: display name
      description:
        type: string
        description: description for Service-Item
      online_price:
        type: number
        format: float
        description: online cost
      offline_price:
        type: number
        format: float
        description: offline cost
      duration:
        type: string
        description: display of the duration
      status:
        type: string
        description: status display
      img_id:
        type: string
        description: imageId for display
  FinanceOverview:
    description: finance overview
    type: object
    properties:
      available_cash:
        type: number
        format: float
        description: cash which can be withdrawed
      frozen_cash:
        type: number
        format: float
        description: cash which cannot be withdrawed
      history_cash:
        type: number
        format: float
        description: accumulated cash amount
  WithdrawRequest:
    description: withdraw
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: shopId currently
      type:
        type: string
        description: Requester type
      amount:
        type: number
        format: float
        description: withdraw amout
  ShopBrief:
    description: ShopBrief
    type: object
    properties:
      img_id:
        type: string
        description: shop images
      work_start_time:
        type: string
        description: yyyy-MM-dd HH:mm
      work_end_time:
        type: string
        description: yyyy-MM-dd HH:mm
  OfflineOrderRequest:
    description: offline Order request
    type: object
    properties:
      customer_id:
        type: integer
        format: int32
      customer_name:
        type: string
      customer_phone:
        type: string
      item_id:
        type: integer
        format: int32
      item_name:
        type: string
      beautician_id:
        type: integer
        format: int32
      beautician_name:
        type: string
      start_datetime:
        type: string
        description: Start DateTime
      end_datetime:
        type: string
        description: Start DateTime
      remark:
        type: string
        description: remark of offline
  # OfflineOrder:
  #   description: offline Order
  #   type: object
  #   properties:
  #     customer_name:
  #       type: string
  #       description: customer name
  GeneralItem:
    description: Tuple[integer, String]
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: key
      name:
        type: string
        description: name
        x-yod-type:
          bank: '@(["中国银行", "工商银行", "农业银行", "建设银行", "交通银行"]).sample @([沪太路支行, 五角场支行]).sample'
  VisitCard:
    description: VisitCard 
    type: object
    properties:
      id:
        type: integer
        format: int32
        description: key
      name:
        type: string
        description: name
      type:
        type: string
        description: type
      img_id:
        type: string
        description: image id
  ItemDetails:
    description: item details
    type: object
    properties:
      id:
        type: integer
        format: int32
      name:
        type: string
      category:
        type: string
      category_id:
        type: integer
        format: int32
      offline_price:
        type: number
        format: float
        description: cost of the Order
      online_price:
        type: number
        format: float
        description: cost of the Order
      duration:
        type: integer
        format: int32
      type:
        type: string
      description:
        type: string
      steps:
        type: string
      products:
        type: string
      target:
        type: string
      cautions:
        type: string
      img_ids:
        type: array
        items:
          type: string
        description: array of item images